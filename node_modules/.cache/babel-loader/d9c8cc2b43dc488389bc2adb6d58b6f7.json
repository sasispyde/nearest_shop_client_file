{"ast":null,"code":"var _jsxFileName = \"E:\\\\New folder\\\\nearest_shop_client_file\\\\src\\\\components\\\\category\\\\Edit_category.js\";\nimport React from 'react';\nimport axios from '../../axios';\nimport { Redirect } from 'react-router';\nimport validator from '../../validation/category/category_validation';\nlet id = \"\";\n\nclass EditCategory extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleText = i => e => {\n      let sub_category_name = [...this.state.sub_category_name];\n      sub_category_name[i] = e.target.value;\n      this.setState({\n        sub_category_name\n      });\n    };\n\n    this.handleCatName = i => e => {\n      let category_name = e.target.value;\n      this.setState({\n        cat_name: category_name\n      });\n    };\n\n    this.handleDelete = i => e => {\n      e.preventDefault();\n      let sub_category_name = [...this.state.sub_category_name.slice(0, i), ...this.state.sub_category_name.slice(i + 1)];\n      this.setState({\n        sub_category_name\n      });\n    };\n\n    this.addQuestion = e => {\n      e.preventDefault();\n\n      if (this.state.sub_category_name.indexOf(\"\") === -1) {\n        let sub_category_name = this.state.sub_category_name.concat(['']);\n        this.setState({\n          sub_category_name\n        });\n      } else {\n        this.setState({\n          custom_interval_error: \"Please Fill The Fileds To Add More\"\n        });\n      }\n    };\n\n    this.state = {\n      data: [],\n      cat_name: [\"\"],\n      sub_category_name: [],\n      name_error: '',\n      sub_category_error: [],\n      redirect: false,\n      main_category_array: [],\n      main_category: '',\n      main_category_error: '',\n      main_category_value: '',\n      main_category_label: 'Select Main Category'\n    };\n  }\n\n  componentDidMount() {\n    // const url = window.location.href;\n    // id = url.split(\"/\");\n    // id = id[5];\n    const urlParams = new URLSearchParams(window.location.search);\n    id = urlParams.get('id');\n    axios.get(`/category/edit/${id}`).then(result => {\n      if (result.data.status) {\n        this.setState({\n          cat_name: result.data.data['category_details'][0]['category_name'],\n          main_category: result.data.data['category_details'][0]['main_category_name'][0]['_id'],\n          main_category_value: result.data.data['category_details'][0]['main_category_name'][0]['_id'],\n          main_category_label: result.data.data['category_details'][0]['main_category_name'][0]['category_name'],\n          sub_category_name: result.data.data['category_details'][0]['sub_category'],\n          main_category_array: result.data.data['main_category']\n        });\n      } else {\n        console.log(result.data.data);\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    let response = validator.validate_sub_array(this.state.sub_category_name);\n\n    if (this.state.cat_name !== \"\" && response.length === 0 && this.state.main_category !== \"\") {\n      let data = {\n        category_name: this.state.cat_name,\n        sub_category: this.state.sub_category_name,\n        main_category: this.state.main_category,\n        id: id\n      };\n      axios.patch(`/category/edit/${id}`, data, {\n        headers: {\n          'Accept': 'application/json'\n        }\n      }).then(result => {\n        if (result.data.status === 1) {\n          this.setState({\n            redirect: true\n          });\n        } else {\n          if (result.data.status === 4) {\n            this.setState({\n              name_error: result.data.data.message\n            });\n          }\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    } else {\n      let name_error = '';\n      let main_category_error = '';\n\n      if (this.state.cat_name === '') {\n        name_error = 'Filed must not be empty';\n      }\n\n      if (this.state.main_category.trim() === \"\") {\n        main_category_error = \"Please select the main category\";\n      }\n\n      this.setState({\n        sub_category_error: response,\n        name_error: name_error,\n        main_category_error: main_category_error\n      });\n    }\n  }\n\n  handleChange(event) {\n    let name = event.target.name;\n\n    if (name === 'main_category') {\n      this.setState({\n        [name]: event.target.value,\n        main_category_value: '',\n        main_category_label: 'Select Main Category'\n      });\n    } else {\n      this.setState({\n        [name]: event.target.value\n      });\n    }\n  }\n\n  render() {\n    if (this.state.redirect) {\n      return React.createElement(Redirect, {\n        to: \"/category/manage_category\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.handleSubmit.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        marginTop: '30px'\n      },\n      className: \" form-group row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"col-sm-2 col-form-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, \"Main Category\"), React.createElement(\"div\", {\n      className: \"col-sm-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"input-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(\"select\", {\n      title: \"Recipe Category\",\n      name: \"main_category\",\n      onChange: this.handleChange.bind(this),\n      className: \"form-control\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: this.state.main_category_value,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, this.state.main_category_label), this.state.main_category_array.map((data, index) => data['category_name'] !== this.state.main_category_label && React.createElement(\"option\", {\n      key: index,\n      value: data['_id'],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, data['category_name'])))), React.createElement(\"p\", {\n      style: {\n        color: \"red\",\n        margin: 'auto auto auto auto'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, this.state.main_category_error))), React.createElement(\"div\", {\n      className: \" form-group row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"col-sm-2 col-form-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, \"Categoty Name\"), React.createElement(\"div\", {\n      className: \"col-sm-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"input-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      onChange: this.handleCatName(0),\n      value: this.state.cat_name,\n      className: \"form-control\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }), \"\\xA0\\xA0\", React.createElement(\"button\", {\n      style: {\n        fontSize: '18px'\n      },\n      title: \"Add Category\",\n      className: \"btn btn-outline-success btn-sm\",\n      onClick: this.addQuestion,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, \"+\")), React.createElement(\"p\", {\n      style: {\n        color: \"red\",\n        margin: 'auto auto auto auto'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, this.state.name_error))), this.state.sub_category_name.map((question, index) => React.createElement(\"div\", {\n      className: \" form-group row\",\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"col-sm-2 col-form-label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, \"Sub Categoty Name \"), React.createElement(\"div\", {\n      className: \"col-sm-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"input-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      onChange: this.handleText(index),\n      value: question,\n      className: \"form-control\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }), \"\\xA0\\xA0\", React.createElement(\"button\", {\n      title: \"Remove\",\n      className: \"btn btn-outline-danger btn-sm\",\n      onClick: this.handleDelete(index),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, \"X\")), React.createElement(\"p\", {\n      style: {\n        color: \"red\",\n        margin: 'auto auto auto auto'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, this.state.sub_category_error[index])))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"form-group row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-6\",\n      style: {\n        margin: 'auto'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"submit\",\n      className: \"btn btn-outline-primary \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }))))));\n  }\n\n}\n\nexport default EditCategory;","map":{"version":3,"sources":["E:/New folder/nearest_shop_client_file/src/components/category/Edit_category.js"],"names":["React","axios","Redirect","validator","id","EditCategory","Component","constructor","props","handleText","i","e","sub_category_name","state","target","value","setState","handleCatName","category_name","cat_name","handleDelete","preventDefault","slice","addQuestion","indexOf","concat","custom_interval_error","data","name_error","sub_category_error","redirect","main_category_array","main_category","main_category_error","main_category_value","main_category_label","componentDidMount","urlParams","URLSearchParams","window","location","search","get","then","result","status","console","log","catch","err","handleSubmit","event","response","validate_sub_array","length","sub_category","patch","headers","message","trim","handleChange","name","render","bind","marginTop","map","index","color","margin","fontSize","question"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport axios from '../../axios';\r\nimport { Redirect } from 'react-router';\r\nimport validator from '../../validation/category/category_validation';\r\n\r\nlet id = \"\";\r\nclass EditCategory extends React.Component{\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tdata : [],\r\n\t\t\tcat_name : [\"\"],\r\n\t\t\tsub_category_name: [],\r\n\t\t\tname_error : '',\r\n\t\t\tsub_category_error: [],\r\n\t\t\tredirect : false,\r\n\t\t\tmain_category_array : [],\r\n\t\t\tmain_category : '',\r\n\t\t\tmain_category_error : '',\r\n\t\t\tmain_category_value : '',\r\n\t\t\tmain_category_label : 'Select Main Category' \r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\t// const url = window.location.href;\r\n\t\t// id = url.split(\"/\");\r\n\t\t// id = id[5];\r\n\r\n\t\tconst urlParams = new URLSearchParams(window.location.search);\r\n\t\tid = urlParams.get('id');\r\n\t\t\r\n\t\taxios.get(`/category/edit/${id}`).then((result)=>{\r\n\t\t\tif(result.data.status){\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tcat_name : result.data.data['category_details'][0]['category_name'],\r\n\t\t\t\t\tmain_category : result.data.data['category_details'][0]['main_category_name'][0]['_id'],\r\n\t\t\t\t\tmain_category_value : result.data.data['category_details'][0]['main_category_name'][0]['_id'],\r\n\t\t\t\t\tmain_category_label : result.data.data['category_details'][0]['main_category_name'][0]['category_name'],\r\n\t\t\t\t\tsub_category_name : result.data.data['category_details'][0]['sub_category'],\r\n\t\t\t\t\tmain_category_array : result.data.data['main_category']\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log(result.data.data)\r\n\t\t\t}\r\n\t\t}).catch((err)=>{\r\n\t\t\tconsole.log(err);\r\n\t\t})\r\n\t}\r\n\r\n\thandleSubmit(event){\r\n\t\tevent.preventDefault();\r\n\t\tlet response = validator.validate_sub_array(this.state.sub_category_name);\r\n\t\tif(this.state.cat_name !== \"\" && response.length === 0 && this.state.main_category !== \"\"){\r\n\t\t\tlet data = {\r\n\t\t\t\tcategory_name : this.state.cat_name,\r\n\t\t\t\tsub_category : this.state.sub_category_name,\r\n\t\t\t\tmain_category : this.state.main_category,\r\n\t\t\t\tid : id\t\r\n\t\t\t}\r\n\t\t\taxios.patch(`/category/edit/${id}`,data , { headers: {'Accept': 'application/json'}}).then((result)=>{\r\n\t\t\t\tif(result.data.status === 1){\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tredirect : true\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif(result.data.status === 4){\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\tname_error : result.data.data.message\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}).catch((err)=>{\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tlet name_error = '';\r\n\t\t\tlet main_category_error = '';\r\n\t\t\tif(this.state.cat_name === ''){\r\n\t\t\t\tname_error = 'Filed must not be empty';\r\n\t\t\t}\r\n\t\t\tif(this.state.main_category.trim() === \"\"){\r\n\t\t\t\tmain_category_error = \"Please select the main category\"\r\n\t\t\t}\r\n\t\t\tthis.setState({\r\n\t\t\t\tsub_category_error : response,\r\n\t\t\t\tname_error : name_error,\r\n\t\t\t\tmain_category_error : main_category_error\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\thandleText = i => e => {\r\n\t    let sub_category_name = [...this.state.sub_category_name]\r\n\t    sub_category_name[i] = e.target.value\r\n\t    this.setState({\r\n\t      sub_category_name\r\n\t    })\r\n\t}\r\n\r\n\thandleCatName = i => e => {\r\n\t    let category_name = e.target.value\r\n\t    this.setState({\r\n\t      cat_name : category_name\r\n\t    })\r\n\t}\r\n\r\n\thandleDelete = i => e => {\r\n\t    e.preventDefault();\r\n\t    let sub_category_name = [\r\n\t      ...this.state.sub_category_name.slice(0, i),\r\n\t      ...this.state.sub_category_name.slice(i + 1)\r\n\t    ]\r\n\t    this.setState({\r\n\t      sub_category_name\r\n\t    })\r\n\t}\r\n\r\n\taddQuestion = e => {\r\n\t    e.preventDefault();\r\n\t    if(this.state.sub_category_name.indexOf(\"\") === -1){\r\n\t\t    let sub_category_name = this.state.sub_category_name.concat([''])\r\n\t\t    this.setState({\r\n\t\t      sub_category_name\r\n\t\t    })\r\n\t    } else {\r\n\t    \tthis.setState({\r\n\t    \t\tcustom_interval_error : \"Please Fill The Fileds To Add More\"\r\n\t    \t})\r\n\t    }\r\n\t}\r\n\r\n\thandleChange(event){\r\n\t\tlet name = event.target.name;\r\n\t\tif(name === 'main_category'){\r\n\t\t\tthis.setState({\r\n\t\t\t\t[name] : event.target.value,\r\n\t\t\t\tmain_category_value : '',\r\n\t\t\t\tmain_category_label : 'Select Main Category'\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tthis.setState({\r\n\t\t\t\t[name] : event.target.value \r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\trender(){\r\n\t\tif (this.state.redirect) {\r\n\t    \treturn <Redirect to='/category/manage_category' />;\r\n\t    }\r\n\t\treturn(\r\n\t\t\t<>\r\n\t\t\t<div className=\"container\">\r\n\t\t\t\t<form onSubmit={ this.handleSubmit.bind(this) }>\r\n\t\t\t\t\t<div style={{ marginTop : '30px' }} className=\" form-group row\">\r\n\t\t\t\t\t\t<label className=\"col-sm-2 col-form-label\">Main Category</label>\r\n\t\t\t\t\t\t<div className=\"col-sm-6\">\r\n\t\t\t\t\t\t\t<div className=\"input-group\">\r\n\t\t\t\t\t\t\t\t<select title=\"Recipe Category\" name=\"main_category\" onChange = { this.handleChange.bind(this) } className=\"form-control\">\r\n\t\t\t\t\t\t\t\t  \t<option value={this.state.main_category_value}>{this.state.main_category_label}</option>\r\n\t\t\t\t\t\t\t\t  \t{\r\n\t\t\t\t\t\t\t\t  \t\tthis.state.main_category_array.map((data,index) =>\r\n\t\t\t\t\t\t\t\t  \t\t\tdata['category_name'] !== this.state.main_category_label &&\r\n\t\t\t\t\t\t\t\t  \t\t\t<option key={ index } value={data['_id']}>{ data['category_name'] }</option>\r\n\t\t\t\t\t\t\t\t  \t\t)\r\n\t\t\t\t\t\t\t\t  \t}\r\n\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t        </div>\r\n\t\t\t\t\t        <p style={{color:\"red\",margin : 'auto auto auto auto'}} >{this.state.main_category_error}</p>\r\n\t\t\t\t        </div>\r\n\t\t\t\t    </div>\r\n\t\t\t\t\t<div className=\" form-group row\">\r\n\t\t\t\t\t\t<label className=\"col-sm-2 col-form-label\">Categoty Name</label>\r\n\t\t\t\t\t\t<div className=\"col-sm-6\">\r\n\t\t\t\t\t\t<div className=\"input-group\">\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t            type=\"text\"\r\n\t\t\t\t\t            onChange={this.handleCatName(0)}\r\n\t\t\t\t\t            value={this.state.cat_name}\r\n\t\t\t\t\t            className =\"form-control\"\r\n\t\t\t\t\t        />&nbsp;&nbsp;\r\n\t\t\t\t        \t<button style={{ fontSize : '18px' }} title=\"Add Category\" className=\"btn btn-outline-success btn-sm\" onClick={this.addQuestion}>+</button>\r\n\t\t\t\t        </div>\r\n\t\t\t\t        <p style={{color:\"red\",margin : 'auto auto auto auto'}} >{this.state.name_error}</p>\r\n\t\t\t\t    \t</div>\r\n\t\t\t\t    </div>\r\n\t\t\t        {this.state.sub_category_name.map((question, index) => (\r\n\t\t\t          <div className=\" form-group row\" key={index}>\r\n\t\t\t          \t<label className=\"col-sm-2 col-form-label\">Sub Categoty Name </label>\r\n\t\t\t            <div className=\"col-sm-6\">\r\n\t\t\t            <div className=\"input-group\">\r\n\t\t\t\t            <input\r\n\t\t\t\t              type=\"text\"\r\n\t\t\t\t              onChange={this.handleText(index)}\r\n\t\t\t\t              value={question}\r\n\t\t\t\t              className =\"form-control\"\r\n\t\t\t\t            />&nbsp;&nbsp;\r\n\t\t\t            \t<button title=\"Remove\" className=\"btn btn-outline-danger btn-sm\" onClick={this.handleDelete(index)}>X</button>\r\n\t\t\t            </div>\r\n\t\t\t            <p style={{color:\"red\",margin : 'auto auto auto auto'}} >{ this.state.sub_category_error[index] }</p>\r\n\t\t\t          </div>\r\n\t\t\t          </div>\r\n\t\t\t        ))}\r\n\t\t\t        <br />\r\n\t\t\t\t    <div className=\"form-group row\">\r\n\t\t\t\t\t    <div className=\"col-sm-6\" style={{ margin:'auto' }}>\r\n\t\t\t\t\t      <input type=\"submit\" className=\"btn btn-outline-primary \" />\r\n\t\t\t\t\t    </div>\r\n\t\t\t\t\t</div>\r\n\t\t\t    </form>\r\n\t\t    </div>\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default EditCategory"]},"metadata":{},"sourceType":"module"}